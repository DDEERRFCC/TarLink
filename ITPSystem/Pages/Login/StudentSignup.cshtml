@page
@model StudentSignupModel
@{
    ViewData["Title"] = "Student Signup";
}

<div class="container mt-5" style="max-width: 900px;">
    <h3 class="mb-4 text-center">Student Signup</h3>

    @* ================== SUCCESS MESSAGE ================== *@
    @if (Model.Message != null)
    {
        <div class="alert alert-success text-center">
            @Model.Message
        </div>
    }

    @* ================== VALIDATION ERRORS ================== *@
    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger">
            <strong>Please fix the following errors:</strong>
            <ul>
                @foreach (var entry in ViewData.ModelState)
                {
                    foreach (var error in entry.Value.Errors)
                    {
                        <li>@entry.Key: @error.ErrorMessage</li>
                    }
                }
            </ul>
        </div>
    }

    <form method="post">

        <!-- LOGIN INFO -->
        <h5 class="border-bottom pb-2">Login Information</h5>
        <div class="row mb-3">
            <div class="col-md-4">
                <label>Email</label>
                <input asp-for="Email" class="form-control" required />
            </div>
            <div class="col-md-4">
                <label>Username</label>
                <input asp-for="Username" class="form-control" required />
            </div>
            <div class="col-md-4">
                <label>NRIC</label>
                <input asp-for="ICNumber" class="form-control" required />
            </div>
        </div>

        <!-- ACADEMIC DETAILS -->
        <h5 class="border-bottom pb-2 mt-4">Academic Details</h5>
        <div class="row mb-3">
            <div class="col-md-3">
                <label>Level</label>
                <select asp-for="Student.level" class="form-select">
                    <option value="">-- Select One --</option>
                    <option value="1">Diploma</option>
                    <option value="2">Degree</option>
                </select>
            </div>

            <div class="col-md-3">
                <label>Cohort</label>
                <select asp-for="Student.cohortId" class="form-select">
                    <option value="">-- Select One --</option>
                    @foreach (var c in Model.Cohorts)
                    {
                        <option value="@c.cohort_id"
                                selected="@(Model.Student.cohortId == c.cohort_id ? "selected" : null)">
                            @c.description
                        </option>
                    }
                </select>
            </div>

            <div class="col-md-3">
                <label>Programme</label>
                <select asp-for="Student.programme" class="form-select">
                    <option value="">-- Select One --</option>
                    <option value="RSD">RSD</option>
                    <option value="RIT">RIT</option>
                </select>
            </div>

            <div class="col-md-3">
                <label>Tutorial Group</label>
                <input asp-for="Student.groupNo" class="form-control" placeholder="1 - 5" />
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label>Student ID</label>
                <input asp-for="Student.studentID" class="form-control" />
            </div>
            <div class="col-md-4">
                <label>Student Email</label>
                <input asp-for="Student.studentEmail" class="form-control" />
            </div>
            <div class="col-md-4">
                <label>CGPA</label>
                <input asp-for="Student.CGPA" type="number" step="0.01" class="form-control" />
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label>University Supervisor</label>
                <input asp-for="Student.ucSupervisor" class="form-control" />
            </div>
            <div class="col-md-6">
                <label>University Supervisor Email</label>
                <input asp-for="Student.ucSupervisorEmail" class="form-control" />
            </div>
        </div>

        <!-- PERSONAL DATA -->
        <h5 class="border-bottom pb-2 mt-4">Personal Data</h5>
        <div class="row mb-3">
            <div class="col-md-6">
                <label>Full Name</label>
                <input asp-for="Student.studentName" class="form-control" />
            </div>
            <div class="col-md-6">
                <label>Gender</label>
                <select asp-for="Student.gender" class="form-select">
                    <option value="">-- Select One --</option>
                    <option value="M">Male</option>
                    <option value="F">Female</option>
                    <option value="O">Other</option>
                </select>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label>Own Transport</label>
                <select asp-for="Student.ownTransport" class="form-select">
                    <option value="">-- Select One --</option>
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>Health Remark</label>
                <textarea asp-for="Student.healthRemark" class="form-control"></textarea>
            </div>
        </div>

        <!-- CONTACT INFO -->
        <h5 class="border-bottom pb-2 mt-4">Contact Information</h5>
        <div class="mb-3">
            <label>Personal Email</label>
            <input asp-for="Student.personalEmail" class="form-control" />
        </div>

        <div class="mb-3">
            <label>Term Address</label>
            <textarea asp-for="Student.tempAddress" class="form-control"></textarea>
        </div>

        <div class="mb-3">
            <label>Permanent Address</label>
            <textarea asp-for="Student.permanentAddress" class="form-control"></textarea>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label>Mobile Number</label>
                <input asp-for="Student.permanentContact" class="form-control" />
            </div>
        </div>

        <!-- TECHNICAL KNOWLEDGE -->
        <h5 class="border-bottom pb-2 mt-4">Technical Knowledge</h5>
        <div class="mb-3">
            <label>Programming Knowledge</label>
            <textarea asp-for="Student.programmingKnowledge" class="form-control"></textarea>
        </div>

        <div class="mb-3">
            <label>Database Knowledge</label>
            <textarea asp-for="Student.databaseKnowledge" class="form-control"></textarea>
        </div>

        <div class="mb-4">
            <label>Networking Knowledge</label>
            <textarea asp-for="Student.networkingKnowledge" class="form-control"></textarea>
        </div>

        <button type="submit" class="btn btn-primary w-100">Submit Application</button>
    </form>
</div>
